import{f as _,j as e,m as t,B as y}from"./index-CTDs4bRA.js";import{C as $,T as F,I as J}from"./game.multiplayer-CQKVkTsd.js";import{D as B,C as R,d as Q}from"./Home-j1PCE9Cf.js";import{R as U}from"./rotate-ccw-BBSprXgg.js";function Z(){const{startGame:q,localPlayerId:m,gameState:a,changeGame:h,players:o,setPlayers:S,mode:j}=_(),{currentCardIndex:c=0,phase:D,step:f,nextPlayer:p,hostWon:u,hostGuess:H,actualPlayer:v,winner:b,shuffledCards:N=[]}=a??{},M=B.themes.flatMap(i=>i.items);function O(){return[...M].sort(()=>Math.random()-.5)}const l=N[c],w=()=>{q({phase:"playing",step:"question",currentCardIndex:0,shuffledCards:O(),actualPlayer:m,nextPlayer:0})},T=()=>{h({...a,step:"voting"})},C=i=>{const P=p>=o.length-1?0:p+1,s=a?.votes??[],V=o[p];let d=H??null;V.type=="host"?d=i:s.push(i);let A=!1,I="voting",x=null;if(s.length==o.length-1){I="results",x=s.sort((n,r)=>s.filter(g=>g===n).length-s.filter(g=>g===r).length).pop();const E=o.map(n=>{let r={...n};return x==d&&n.type=="host"?(r.points++,A=!0):x!=d&&n.type!="host"&&r.points++,r});S(E)}h({...a,step:I,actualPlayer:o[P].id,nextPlayer:P,votes:s,winner:x,hostGuess:d,hostWon:A})},W=()=>{c<N.length-1&&h({...a,currentCardIndex:c+1,step:"question",votes:[],hostGuess:null,hostWon:!1})},z=()=>{w()},[k="",G=""]=(l?.title??"")?.split("OU");return e.jsx($,{className:"text-gradient-decisoes",game:B,icon:e.jsx(J,{variant:"decisoes"}),showMultiplayer:!0,onStart:w,children:D=="playing"&&e.jsx(e.Fragment,{children:e.jsxs(t.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-card rounded-2xl border border-border overflow-hidden p-5",children:[f==="question"&&l&&e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-4 justify-center",children:[e.jsxs(t.div,{initial:{x:-50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2},className:"bg-gradient-to-r from-rose-500/20 to-rose-600/10 border border-rose-500/30 rounded-2xl p-6",children:[e.jsx("span",{className:"text-violet-400 font-bold text-lg mb-2 block",children:"OpÃ§Ã£o A"}),e.jsx("p",{className:"text-foreground font-display text-lg",children:k})]}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-muted-foreground font-display text-xl",children:"ou"})}),e.jsxs(t.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},className:"bg-gradient-to-r from-violet-500/20 to-violet-600/10 border border-violet-500/30 rounded-2xl p-6",children:[e.jsx("span",{className:"text-violet-400 font-bold text-lg mb-2 block",children:"OpÃ§Ã£o B"}),e.jsx("p",{className:"text-foreground font-display text-lg",children:G})]})]}),e.jsxs(y,{onClick:T,variant:"decisoes",size:"lg",className:"mt-6",children:["Iniciar VotaÃ§Ã£o",e.jsx(R,{className:"w-5 h-5 ml-2"})]})]},"question"),f==="voting"&&l&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-display font-bold text-foreground",children:l.title}),e.jsx("p",{className:"text-muted-foreground text-md",children:l.footer}),e.jsx("p",{className:"text-muted-foreground text-sm italic font-bold",children:"Ass: Nelson, o pombo da discÃ³rdia"})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 mx-2 justify-center",children:[e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C("A"),disabled:v!=m&&j!="local",className:"bg-gradient-to-r from-rose-500/30 to-rose-600/20 border-2 border-rose-500/50 rounded-2xl p-6 text-left hover:shadow-lg hover:shadow-rose-500/20 transition-all",children:[e.jsx("span",{className:"text-rose-400 font-bold text-lg mb-2 block",children:"A"}),e.jsx("p",{className:"text-foreground font-display",children:k})]}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C("B"),disabled:v!=m&&j!="local",className:"bg-gradient-to-r from-violet-500/30 to-violet-600/20 border-2 border-violet-500/50 rounded-2xl p-6 text-left hover:shadow-lg hover:shadow-violet-500/20 transition-all",children:[e.jsx("span",{className:"text-violet-400 font-bold text-lg mb-2 block",children:"B"}),e.jsx("p",{className:"text-foreground font-display",children:G})]})]})]},"voting"),f==="results"&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 flex flex-col items-center justify-center",children:e.jsxs(t.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},className:"text-center w-full",children:[e.jsx(t.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`w-24 h-24 mx-auto mb-4 rounded-full flex items-center justify-center ${u?"gradient-decisoes shadow-glow-decisoes":"bg-muted"}`,children:u?e.jsx(F,{className:"w-12 h-12 text-foreground"}):e.jsx(Q,{className:"w-12 h-12 text-muted-foreground"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-foreground mb-2",children:u?"Host Acertou! ðŸŽ‰":"Host Errou! ðŸ’€"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["A maioria escolheu: ",e.jsxs("span",{className:b==="A"?"text-rose-400 font-bold":"text-violet-400 font-bold",children:["OpÃ§Ã£o ",b]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(y,{onClick:W,variant:"decisoes",size:"lg",className:"w-full",children:["PrÃ³xima Rodada",e.jsx(R,{className:"w-5 h-5 ml-2"})]}),e.jsxs(y,{onClick:z,variant:"outline",size:"lg",className:"w-full",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Novo Jogo"]})]})]})},"reveal")]},`palpiteiro-${c}`)})})}export{Z as Decisoes,Z as default};
