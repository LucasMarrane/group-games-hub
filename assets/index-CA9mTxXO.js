import{c as N,j as e,a as c,T as _,b as L,d as q,m as I,B as v,e as $,s as A,I as B,r as h}from"./index-CTDs4bRA.js";import{I as D,S as g,P as M}from"./Home-j1PCE9Cf.js";import{C as S}from"./check-ZFgB2nLQ.js";import{C as R,I as O}from"./game.multiplayer-CQKVkTsd.js";import{R as G}from"./rotate-ccw-BBSprXgg.js";import{S as H,a as k}from"./game.shufle-DFRcG1fA.js";const z=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],J=N("eye-off",z);const K=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],C=N("heart",K);const Q=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],V=N("layers",Q);const W=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],X=N("search",W);function Y({children:t,className:a}){return e.jsx(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:c("space-y-4 theme-card group",a),children:t})}function F({currentTheme:t,expansionDescription:a,children:s,isUsed:o,isFavorite:l,onToggleUsed:n,onToggleFavorite:x,className:u=""}){return e.jsxs(Y,{className:u,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h2",{className:"text-2xl font-display font-bold text-foreground",children:t.title}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:x,className:c("p-2 rounded-full transition-all duration-200",l?"text-primary bg-primary/10":"text-muted-foreground hover:text-primary hover:bg-primary/5"),"aria-label":"Adicionar aos favoritos",children:e.jsx(C,{className:c("w-4 h-4",!1)})}),e.jsx("button",{onClick:n,className:c("p-2 rounded-full transition-all duration-200",o?"text-accent bg-accent/10":"text-muted-foreground hover:text-accent hover:bg-accent/5"),"aria-label":"Marcar como usado",children:e.jsx(S,{className:c("w-4 h-4",!1)})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{children:[e.jsx(L,{asChild:!0,children:e.jsx("span",{className:"px-3 py-1 rounded-full bg-secondary/20 text-secondary text-xs font-medium",children:t.sourcePack})}),e.jsx(q,{className:"m-2 bg-secondary text-white max-w-sm",children:a})]}),e.jsx("span",{className:"px-3 py-1 rounded-full bg-primary/20 text-primary text-xs font-medium",children:t.category})]}),e.jsx("div",{className:"flex items-center gap-4 pt-4 border-t border-border",children:s})]})}function Z({selected:t,onSelect:a,itens:s=[]}){const o=[{label:"Todos",value:"all"},...s];return e.jsx("div",{className:"flex gap-2 overflow-x-auto flex-wrap w-full pb-2 scrollbar-hide",children:o.map(l=>e.jsx("button",{onClick:()=>a(l.value),className:c("px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-all duration-200",t===l.value?"bg-foreground text-background":"bg-muted text-muted-foreground hover:bg-muted/80"),children:l.label},l.value))})}function ee({total:t,used:a,favorites:s,available:o,onReset:l}){const n=a/t*100;return e.jsxs("div",{className:"bg-card rounded-2xl p-4 shadow-card",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Progresso"}),e.jsxs("span",{className:"font-semibold text-foreground",children:[a," de ",t]})]}),e.jsx("div",{className:"h-3 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full gradient-accent rounded-full transition-all duration-500",style:{width:`${n}%`}})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-between sm:flex-row",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent/10 flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-accent"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:a}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Usados"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:s}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Favoritos"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-secondary flex items-center justify-center",children:e.jsx(V,{className:"w-4 h-4 text-secondary-foreground"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-foreground",children:o}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Disponíveis"})]})]})]}),e.jsxs(v,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive mt-2 sm:mt-0",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Resetar"]})]})]})}function se({value:t,onChange:a,showOnlyFavorites:s,onToggleFavorites:o,hideUsed:l,onToggleHideUsed:n}){return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(D,{type:"text",placeholder:"Buscar temas...",value:t,onChange:x=>a(x.target.value),className:"pl-10 h-12 rounded-xl border-border bg-card"})]}),e.jsx("button",{onClick:o,className:c("w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200",s?"gradient-primary text-primary-foreground shadow-button":"bg-card border border-border text-muted-foreground hover:text-primary"),"aria-label":"Mostrar apenas favoritos",children:e.jsx(C,{className:c("w-5 h-5",s&&"fill-current")})}),e.jsx("button",{onClick:n,className:c("w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-200",l?"gradient-accent text-accent-foreground":"bg-card border border-border text-muted-foreground hover:text-accent"),"aria-label":"Esconder temas usados",children:e.jsx(J,{className:"w-5 h-5"})})]})}function te(t,a,s){const o=t.length,l=Math.ceil(o/s),n=(a-1)*s,x=n+s;return{data:t.slice(n,x),page:a,pageSize:s,totalItems:o,totalPages:l}}const U={usedThemes:[],favoriteThemes:[]},f=A(()=>({hideUsed:!1,showOnlyFavorites:!1,...U}),{name:"sincronia",storage:B()});function w(t){f.setState(a=>{const s=new Set(a.usedThemes);return s.has(t)?s.delete(t):s.add(t),{...a,usedThemes:Array.from(s)}})}function P(t){f.setState(a=>{const s=new Set(a.favoriteThemes);return s.has(t)?s.delete(t):s.add(t),{...a,favoriteThemes:Array.from(s)}})}function ae(){f.setState(U)}const re=()=>$(f);function ne(t){const a=[];return t.forEach(s=>{const o=new Map;s.categories.forEach(l=>o.set(l.id,l.name)),s.items.forEach(l=>{const n=new Map(l.scale),x=n.get(1)??"Minímo",u=n.get(100)??"Maxímo",j=o.get(l.category)||"Geral",m=`${s.id.toLowerCase()}-${l.id}`;a.push({id:m,title:l.title,category:j,scaleMin:String(x),scaleMax:String(u),sourcePack:s.name})})}),a}function ue(){const{hideUsed:t,showOnlyFavorites:a,favoriteThemes:s,usedThemes:o}=re(),l=h.useMemo(()=>ne(g.themes),[]),[n,x]=h.useState(null),[u,j]=h.useState(1),[m,T]=h.useState({query:"",expansion:{selected:"all",hiden:!1},category:{selected:"all",hiden:!1}}),d=h.useMemo(()=>r=>r.filter(i=>{const[E]=i.id.split("-");if(m?.expansion.selected!=="all"&&E!==m?.expansion.selected||a&&!s.includes(i.id)||t&&o.includes(i.id))return!1;if(m.query){const y=m.query.toLowerCase();return i.title.toLowerCase().includes(y)||i.scaleMin.toLowerCase().includes(y)||i.scaleMax.toLowerCase().includes(y)}return!0}),[m,t,a])(l),b=h.useCallback(()=>{const r=Math.floor(Math.random()*d.length);x(d[r])},[d]),p=te(d,u,24);return e.jsxs(R,{className:"text-gradient-sincronia",game:g,icon:e.jsx(O,{variant:"sincronia"}),children:[e.jsx(H,{totalThemes:d.length,children:n?e.jsxs(e.Fragment,{children:[e.jsxs(F,{className:"border w-full",isFavorite:new Set(s)?.has(n.id),isUsed:new Set(o)?.has(n.id),currentTheme:n,onToggleFavorite:()=>P(n.id),onToggleUsed:()=>w(n.id),expansionDescription:g.getExpansionDescription(n.sourcePack),children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"1"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.scaleMin})]}),e.jsx("div",{className:"flex-1 h-2 rounded-full gradient-sincronia-progress"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-sincronia-max",children:"100"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:n.scaleMax})]})]}),e.jsxs("div",{className:"flex w-full gap-3",children:[e.jsxs(v,{onClick:b,disabled:d.length===0,variant:"outline",className:"flex-1",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Sortear Outro"]}),e.jsxs(v,{onClick:()=>{w(n.id),b()},disabled:o?.includes(n.id),className:"flex-1 gradient-accent border-0",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Usar e Sortear"]})]})]}):e.jsxs(v,{onClick:b,disabled:d.length===0,className:"w-full h-16 text-lg font-display gradient-primary border-0 shadow-button",children:[e.jsx(k,{className:c("w-5 h-5 mr-2")}),d.length>0?"Sortear Tema":"Nenhum tema disponível"]})}),e.jsx(ee,{available:d.filter(r=>!o?.includes(r.id)).length,favorites:s?.length,used:o?.length,total:d.length,onReset:ae}),e.jsx(I.div,{layout:!0,className:"bg-card rounded-2xl p-6 border border-border",children:e.jsxs("div",{className:"flex flex-col justify-between mb-4",children:[e.jsx(se,{onToggleHideUsed:()=>f.setState(r=>({...r,hideUsed:!r.hideUsed})),onToggleFavorites:()=>f.setState(r=>({...r,showOnlyFavorites:!r.showOnlyFavorites})),onChange:r=>T(i=>({...i,query:r})),hideUsed:t,value:m.query,showOnlyFavorites:a}),e.jsx("span",{className:"text-xs m-2 uppercase tracking-wider text-muted-foreground",children:"Expansões"}),e.jsx(Z,{onSelect:r=>{T(i=>({...i,expansion:{...i.expansion,selected:r}}))},itens:g.expansions,selected:m.expansion.selected||"all"})]})}),e.jsxs("section",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"font-display text-lg font-semibold text-foreground",children:[d.length," ",d.length===1?"tema":"temas"]})}),p.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx(M,{page:u,totalPages:p.totalPages,setPage:j}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:p.data.map((r,i)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${i*50}ms`},children:e.jsxs(F,{isFavorite:new Set(s)?.has(r.id),isUsed:new Set(o)?.has(r.id),currentTheme:r,onToggleFavorite:()=>P(r.id),onToggleUsed:()=>w(r.id),expansionDescription:g.getExpansionDescription(r.sourcePack),children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:"1"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.scaleMin})]}),e.jsx("div",{className:"flex-1 h-2 rounded-full gradient-sincronia-progress"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-sincronia-max",children:"100"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.scaleMax})]})]})},r.id))}),e.jsx(M,{page:u,totalPages:p.totalPages,setPage:j})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhum tema encontrado com os filtros atuais."})})]})]})}export{ue as Sincronia,ue as default};
