import{r as Q,f as T,j as e,m as a,B as u}from"./index-CTDs4bRA.js";import{C as E,T as F,I as $}from"./game.multiplayer-CQKVkTsd.js";import{O as w,c as A,C,B as D}from"./Home-j1PCE9Cf.js";import{R as H}from"./rotate-ccw-BBSprXgg.js";function U(){const[o,f]=Q.useState(null),{startGame:P,localPlayerId:j,gameState:s,changeGame:h,players:l,mode:I,setPlayers:k}=T(),{currentCardIndex:n=0,phase:p,step:c,actualPlayer:q,nextPlayer:N,shuffledCards:r=[]}=s??{},G=w.themes.flatMap(t=>t.items);function S(){return[...G].sort(()=>Math.random()-.5)}const d=r[n],b=()=>{P({phase:"playing",step:"question",currentCardIndex:0,shuffledCards:S(),actualPlayer:j,nextPlayer:0})},z=()=>{h({...s,step:"voting"}),f(null)},B=()=>{if(o){const t=N>=l.length-1?0:N+1,i=s?.votes??[];i.push(o);let v="voting",g=null;if(i.length==l.length){v="results",g=l.find(m=>m.id==i.sort((x,V)=>i.filter(y=>y===x).length-i.filter(y=>y===V).length).pop());const R=l.map(m=>{let x={...m};return m.id==g.id&&x.points++,x});k(R)}h({...s,step:v,actualPlayer:l[t].id,nextPlayer:t,votes:i,winner:g}),f(null)}},M=()=>{n<r.length-1&&h({...s,currentCardIndex:n+1,step:"question",votes:[]})},O=()=>{b()};return console.log(d),e.jsxs(E,{className:"text-gradient-onca",game:w,icon:e.jsx($,{variant:"onca"}),onStart:b,showMultiplayer:!0,children:[p=="playing"&&e.jsx(e.Fragment,{children:e.jsxs(a.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-card rounded-2xl border border-border overflow-hidden p-5",children:[c=="question"&&e.jsxs(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex-1 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("span",{className:"text-onca text-sm font-medium",children:["Pergunta ",n+1," de ",r.length]})}),e.jsxs(a.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-card/80 backdrop-blur rounded-3xl p-8 shadow-glow-onca mb-8 max-w-md",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-4 text-onca"}),e.jsx("p",{className:"text-xl font-display font-semibold text-foreground text-center",children:d.title})]}),e.jsxs(u,{onClick:z,variant:"onca",size:"lg",children:["Votar",e.jsx(C,{className:"w-5 h-5 ml-2"})]})]},"question"),c=="voting"&&e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-xl font-display font-bold text-foreground mb-2",children:"Quem combina mais?"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:d?.title})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:l.map(t=>e.jsx(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(t.id),className:`p-4 rounded-2xl border-2 transition-all ${o===t.id?"border-onca bg-onca/20 shadow-glow-onca":"border-border bg-card/50"}`,children:e.jsx("span",{className:"font-display font-semibold text-foreground",children:t.name})},t.id))}),e.jsx(u,{onClick:B,disabled:!o||q!=j&&I!="local",variant:"onca",size:"lg",className:"mt-auto",children:"Confirmar Voto"})]},"voting"),c==="results"&&e.jsx(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex-1 flex flex-col",children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(a.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-20 h-20 mx-auto mb-4 rounded-full gradient-onca shadow-glow-onca flex items-center justify-center",children:e.jsx(F,{className:"w-10 h-10 text-foreground"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-foreground mb-1",children:"O escolhido foi..."}),e.jsx("p",{className:"text-3xl font-display font-bold text-onca",children:s?.winner?.name}),e.jsxs("div",{className:"bg-muted rounded-xl mt-4 p-2 flex items-center text-center",children:[e.jsx(D,{className:"mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-md text-white text-muted",children:d.footer}),e.jsx("p",{className:"text-muted-foreground text-sm italic font-bold",children:"Ass: Nelson, o pombo da discórdia"})]})]})]})},"results")]},`palpiteiro-${n}`)}),p&&p!="finished"&&!["voting","question"].includes(c)&&e.jsx(a.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex-1 flex flex-col",children:e.jsxs("div",{className:"mt-auto space-y-3",children:[n<r.length-1?e.jsxs(u,{onClick:M,variant:"onca",size:"lg",className:"w-full",children:["Próxima Pergunta",e.jsx(C,{className:"w-5 h-5 ml-2"})]}):e.jsx("p",{className:"text-center text-muted-foreground mb-2",children:"Fim das perguntas!"}),e.jsxs(u,{onClick:O,variant:"outline",size:"lg",className:"w-full",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Novo Jogo"]})]})},"results")]})}export{U as Onca,U as default};
